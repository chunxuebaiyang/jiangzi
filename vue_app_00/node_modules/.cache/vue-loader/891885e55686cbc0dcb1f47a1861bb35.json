{"remainingRequest":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\src\\components\\list\\listcar.vue?vue&type=style&index=0&id=2f443b28&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\src\\components\\list\\listcar.vue","mtime":1556196890729},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.debutton{\n    float:right\n}\n",{"version":3,"sources":["listcar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4JA;AACA;AACA","file":"listcar.vue","sourceRoot":"src\\components\\list","sourcesContent":["<template>\r\n\t<div class=\"app\">\r\n\t\t<div class=\"mui-card\">\r\n\t\t\t<div class=\"mui-card-header\">全选\r\n\t\t\t\t<input @change=\"selectAll\" type=\"checkbox\" v-model=\"allcb\"/>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mui-card-content\">\r\n\t\t\t\t<div class=\"mui-card-content-inner\">\r\n\t\t\t\t\t<ul class=\"mui-table-view\">\r\n                        <p v-if=\"kkong==0\">您的购物车什么都没有</p>\r\n\t\t\t\t\t\t<li  v-for=\"(item,i) of list\" class=\"mui-table-view-cell mui-media\" :key=\"i\">\r\n\t\t\t\t\t\t\t<a href=\"javascript:;\">\r\n\t\t\t\t\t\t\t\t<img class=\"mui-media-object mui-pull-left\" src=\"http://127.0.0.1:6060/img/niupai.jpg\">\r\n\t\t\t\t\t\t\t\t<div class=\"mui-media-body\">\r\n\t\t\t\t\t\t\t\t\t<p class='mui-ellipsis'>\r\n\t\t\t\t\t\t\t\t\t\t<input @click=\"removeItem\"   :data-id=\"item.id\" class=\"debutton\" type=\"button\" value=\"删除\"/>\r\n                                        <button class=\"debutton\" @click=\"add\" :data-add=\"i\">+</button>\r\n                                        <button class=\"debutton\" >{{item.count}}</button>\r\n                                        <button class=\"debutton\" @click=\"sub\" :data-sub=\"i\">-</button>\r\n\t\t\t\t\t\t\t\t\t\t<input @click=\"changeitem\" type=\"checkbox\" v-model=\"item.cb\" :data-i=\"i\" />\r\n\t\t\t\t\t\t\t\t\t\t{{item.lname}}<br/>\r\n\t\t\t\t\t\t\t\t\t\t￥：{{item.price}}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n                    \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mui-card-footer\"><input type=\"button\" @click=\"removeSelect\" value=\"删除选中商品\">￥：{{totals.toFixed(2)}}<input  class=\"debutton\" type=\"button\" value=\"立即购买\"/></div>\r\n\t\t</div>\r\n\t\t<div style=\"height:70px\"></div>\r\n\t\t<footers :active=\"active\"></footers>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport footers from \"@/components/footer/footer.vue\"\r\nexport default {\r\n    components:{\r\n        footers:footers\r\n    },\r\n    data(){\r\n        return {\r\n            list:[],  //保存购物列表\r\n            allcb:false,//全选状态默认选中\r\n            totals:0,\r\n            active:3,\r\n            kkong:0\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore()\r\n    },\r\n    methods: {\r\n        selectAll(e){\r\n            var cb=e.target.checked;\r\n            for(var item of this.list){\r\n                item.cb=cb\r\n            }\r\n            this.allcb = cb\r\n            this.total()\r\n        },\r\n        changeitem(e){\r\n            var cb=e.target.checked;\r\n            this.list[e.target.dataset.i].cb=cb\r\n            var count=0;\r\n            for(var item of this.list){\r\n                if(item.cb){\r\n                    count++;\r\n                }\r\n            }\r\n            if(count==this.list.length){\r\n                this.allcb = true\r\n            }else{\r\n                this.allcb = false;\r\n            }\r\n            this.total()//调用总价函数\r\n        },\r\n        total(){\r\n            this.totals=0;\r\n            for(var i=0;i<this.list.length;i++){\r\n                if(this.list[i].cb){\r\n                    this.totals+=this.list[i].price\r\n                }\r\n            }\r\n        },\r\n        removeSelect(e){\r\n            this.$messagebox.confirm(\"确认全部删除吗?\").then(action=>{\r\n                let ids=\"\";\r\n                for (var item of this.list){\r\n                    if(item.cb){\r\n                        ids +=item.id+\",\"\r\n                    }\r\n                }\r\n                if(ids.length==0){\r\n                    this.$toast(\"请选择要删除的商品\")\r\n                    return;\r\n                }\r\n                ids=ids.substring(0,ids.length-1);\r\n                this.axios.get(`http://127.0.0.1:6060/removeMItem?ids=${ids}`)\r\n                .then(result=>{\r\n                    if(result.data.code==1){\r\n                        this.$toast(\"删除成功\")\r\n                        this.loadMore()\r\n                    }else{\r\n                        this.$toast(\"删除失败\")\r\n                    }\r\n                })                \r\n            }).catch(result=>{\r\n            })\r\n        },\r\n        removeItem(e){\r\n            this.$messagebox.confirm(\"确认删除吗?\").then(action=>{\r\n                var id=e.target.dataset.id\r\n                this.axios.get(`http://127.0.0.1:6060/removeCartItem?id=${id}`)\r\n                .then(result=>{\r\n                    if(result.data.code==1){\r\n                        this.$toast(\"删除成功\")\r\n                        this.loadMore()\r\n                    }else{\r\n                        this.$toast(\"删除失败\")\r\n                    }\r\n                })                \r\n            }).catch(result=>{\r\n            })\r\n        },\r\n        loadMore(){        \r\n            this.axios.get(\"http://127.0.0.1:6060/getcart?uid=666666\")\r\n            .then(result=>{              \r\n                var rows=result.data.data; \r\n                if(rows){\r\n                    this.kkong=1\r\n                }\r\n                for(var item of rows){\r\n                    item.cb=false;\r\n                }\r\n                this.list=rows\r\n                console.log(rows)\r\n            })\r\n        },\r\n        sub(e){\r\n            var i = e.target.dataset.sub\r\n            if(this.list[i].count>1){\r\n                this.list[i].count--\r\n            }\r\n        },\r\n        add(e){\r\n            var i = e.target.dataset.sub\r\n            this.list[i].count++\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .debutton{\r\n        float:right\r\n    }\r\n</style>"]}]}