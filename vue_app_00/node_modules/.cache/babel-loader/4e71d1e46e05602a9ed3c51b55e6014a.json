{"remainingRequest":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\src\\components\\list\\listcar.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\src\\components\\list\\listcar.vue","mtime":1556196890729},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\web\\Desktop\\xiangmu\\Android\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.sub\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport footers from \"@/components/footer/footer.vue\";\nexport default {\n  components: {\n    footers: footers\n  },\n  data: function data() {\n    return {\n      list: [],\n      //保存购物列表\n      allcb: false,\n      //全选状态默认选中\n      totals: 0,\n      active: 3,\n      kkong: 0\n    };\n  },\n  created: function created() {\n    this.loadMore();\n  },\n  methods: {\n    selectAll: function selectAll(e) {\n      var cb = e.target.checked;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.list[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          item.cb = cb;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.allcb = cb;\n      this.total();\n    },\n    changeitem: function changeitem(e) {\n      var cb = e.target.checked;\n      this.list[e.target.dataset.i].cb = cb;\n      var count = 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          if (item.cb) {\n            count++;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      if (count == this.list.length) {\n        this.allcb = true;\n      } else {\n        this.allcb = false;\n      }\n\n      this.total(); //调用总价函数\n    },\n    total: function total() {\n      this.totals = 0;\n\n      for (var i = 0; i < this.list.length; i++) {\n        if (this.list[i].cb) {\n          this.totals += this.list[i].price;\n        }\n      }\n    },\n    removeSelect: function removeSelect(e) {\n      var _this = this;\n\n      this.$messagebox.confirm(\"确认全部删除吗?\").then(function (action) {\n        var ids = \"\";\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = _this.list[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var item = _step3.value;\n\n            if (item.cb) {\n              ids += item.id + \",\";\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n\n        if (ids.length == 0) {\n          _this.$toast(\"请选择要删除的商品\");\n\n          return;\n        }\n\n        ids = ids.substring(0, ids.length - 1);\n\n        _this.axios.get(\"http://127.0.0.1:6060/removeMItem?ids=\".concat(ids)).then(function (result) {\n          if (result.data.code == 1) {\n            _this.$toast(\"删除成功\");\n\n            _this.loadMore();\n          } else {\n            _this.$toast(\"删除失败\");\n          }\n        });\n      }).catch(function (result) {});\n    },\n    removeItem: function removeItem(e) {\n      var _this2 = this;\n\n      this.$messagebox.confirm(\"确认删除吗?\").then(function (action) {\n        var id = e.target.dataset.id;\n\n        _this2.axios.get(\"http://127.0.0.1:6060/removeCartItem?id=\".concat(id)).then(function (result) {\n          if (result.data.code == 1) {\n            _this2.$toast(\"删除成功\");\n\n            _this2.loadMore();\n          } else {\n            _this2.$toast(\"删除失败\");\n          }\n        });\n      }).catch(function (result) {});\n    },\n    loadMore: function loadMore() {\n      var _this3 = this;\n\n      this.axios.get(\"http://127.0.0.1:6060/getcart?uid=666666\").then(function (result) {\n        var rows = result.data.data;\n\n        if (rows) {\n          _this3.kkong = 1;\n        }\n\n        var _iteratorNormalCompletion4 = true;\n        var _didIteratorError4 = false;\n        var _iteratorError4 = undefined;\n\n        try {\n          for (var _iterator4 = rows[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n            var item = _step4.value;\n            item.cb = false;\n          }\n        } catch (err) {\n          _didIteratorError4 = true;\n          _iteratorError4 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n              _iterator4.return();\n            }\n          } finally {\n            if (_didIteratorError4) {\n              throw _iteratorError4;\n            }\n          }\n        }\n\n        _this3.list = rows;\n        console.log(rows);\n      });\n    },\n    sub: function sub(e) {\n      var i = e.target.dataset.sub;\n\n      if (this.list[i].count > 1) {\n        this.list[i].count--;\n      }\n    },\n    add: function add(e) {\n      var i = e.target.dataset.sub;\n      this.list[i].count++;\n    }\n  }\n};",{"version":3,"sources":["listcar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"app\">\r\n\t\t<div class=\"mui-card\">\r\n\t\t\t<div class=\"mui-card-header\">全选\r\n\t\t\t\t<input @change=\"selectAll\" type=\"checkbox\" v-model=\"allcb\"/>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mui-card-content\">\r\n\t\t\t\t<div class=\"mui-card-content-inner\">\r\n\t\t\t\t\t<ul class=\"mui-table-view\">\r\n                        <p v-if=\"kkong==0\">您的购物车什么都没有</p>\r\n\t\t\t\t\t\t<li  v-for=\"(item,i) of list\" class=\"mui-table-view-cell mui-media\" :key=\"i\">\r\n\t\t\t\t\t\t\t<a href=\"javascript:;\">\r\n\t\t\t\t\t\t\t\t<img class=\"mui-media-object mui-pull-left\" src=\"http://127.0.0.1:6060/img/niupai.jpg\">\r\n\t\t\t\t\t\t\t\t<div class=\"mui-media-body\">\r\n\t\t\t\t\t\t\t\t\t<p class='mui-ellipsis'>\r\n\t\t\t\t\t\t\t\t\t\t<input @click=\"removeItem\"   :data-id=\"item.id\" class=\"debutton\" type=\"button\" value=\"删除\"/>\r\n                                        <button class=\"debutton\" @click=\"add\" :data-add=\"i\">+</button>\r\n                                        <button class=\"debutton\" >{{item.count}}</button>\r\n                                        <button class=\"debutton\" @click=\"sub\" :data-sub=\"i\">-</button>\r\n\t\t\t\t\t\t\t\t\t\t<input @click=\"changeitem\" type=\"checkbox\" v-model=\"item.cb\" :data-i=\"i\" />\r\n\t\t\t\t\t\t\t\t\t\t{{item.lname}}<br/>\r\n\t\t\t\t\t\t\t\t\t\t￥：{{item.price}}\r\n\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n                    \r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"mui-card-footer\"><input type=\"button\" @click=\"removeSelect\" value=\"删除选中商品\">￥：{{totals.toFixed(2)}}<input  class=\"debutton\" type=\"button\" value=\"立即购买\"/></div>\r\n\t\t</div>\r\n\t\t<div style=\"height:70px\"></div>\r\n\t\t<footers :active=\"active\"></footers>\r\n\t</div>\r\n</template>\r\n<script>\r\nimport footers from \"@/components/footer/footer.vue\"\r\nexport default {\r\n    components:{\r\n        footers:footers\r\n    },\r\n    data(){\r\n        return {\r\n            list:[],  //保存购物列表\r\n            allcb:false,//全选状态默认选中\r\n            totals:0,\r\n            active:3,\r\n            kkong:0\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore()\r\n    },\r\n    methods: {\r\n        selectAll(e){\r\n            var cb=e.target.checked;\r\n            for(var item of this.list){\r\n                item.cb=cb\r\n            }\r\n            this.allcb = cb\r\n            this.total()\r\n        },\r\n        changeitem(e){\r\n            var cb=e.target.checked;\r\n            this.list[e.target.dataset.i].cb=cb\r\n            var count=0;\r\n            for(var item of this.list){\r\n                if(item.cb){\r\n                    count++;\r\n                }\r\n            }\r\n            if(count==this.list.length){\r\n                this.allcb = true\r\n            }else{\r\n                this.allcb = false;\r\n            }\r\n            this.total()//调用总价函数\r\n        },\r\n        total(){\r\n            this.totals=0;\r\n            for(var i=0;i<this.list.length;i++){\r\n                if(this.list[i].cb){\r\n                    this.totals+=this.list[i].price\r\n                }\r\n            }\r\n        },\r\n        removeSelect(e){\r\n            this.$messagebox.confirm(\"确认全部删除吗?\").then(action=>{\r\n                let ids=\"\";\r\n                for (var item of this.list){\r\n                    if(item.cb){\r\n                        ids +=item.id+\",\"\r\n                    }\r\n                }\r\n                if(ids.length==0){\r\n                    this.$toast(\"请选择要删除的商品\")\r\n                    return;\r\n                }\r\n                ids=ids.substring(0,ids.length-1);\r\n                this.axios.get(`http://127.0.0.1:6060/removeMItem?ids=${ids}`)\r\n                .then(result=>{\r\n                    if(result.data.code==1){\r\n                        this.$toast(\"删除成功\")\r\n                        this.loadMore()\r\n                    }else{\r\n                        this.$toast(\"删除失败\")\r\n                    }\r\n                })                \r\n            }).catch(result=>{\r\n            })\r\n        },\r\n        removeItem(e){\r\n            this.$messagebox.confirm(\"确认删除吗?\").then(action=>{\r\n                var id=e.target.dataset.id\r\n                this.axios.get(`http://127.0.0.1:6060/removeCartItem?id=${id}`)\r\n                .then(result=>{\r\n                    if(result.data.code==1){\r\n                        this.$toast(\"删除成功\")\r\n                        this.loadMore()\r\n                    }else{\r\n                        this.$toast(\"删除失败\")\r\n                    }\r\n                })                \r\n            }).catch(result=>{\r\n            })\r\n        },\r\n        loadMore(){        \r\n            this.axios.get(\"http://127.0.0.1:6060/getcart?uid=666666\")\r\n            .then(result=>{              \r\n                var rows=result.data.data; \r\n                if(rows){\r\n                    this.kkong=1\r\n                }\r\n                for(var item of rows){\r\n                    item.cb=false;\r\n                }\r\n                this.list=rows\r\n                console.log(rows)\r\n            })\r\n        },\r\n        sub(e){\r\n            var i = e.target.dataset.sub\r\n            if(this.list[i].count>1){\r\n                this.list[i].count--\r\n            }\r\n        },\r\n        add(e){\r\n            var i = e.target.dataset.sub\r\n            this.list[i].count++\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .debutton{\r\n        float:right\r\n    }\r\n</style>"],"sourceRoot":"src\\components\\list"}]}